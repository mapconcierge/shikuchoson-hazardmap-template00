{"version":3,"sources":["images lazy /^/.//.*$/ groupOptions: {} namespace object","components/BottomLeftImages.tsx","components/CityBoundary.tsx","components/FeaturePopup.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","keys","Object","module","exports","BottomLeftImages","imageNames","collapsed","useState","images","setImages","open","setOpen","useEffect","a","all","imageName","title","replace","image","src","default","importedImages","className","Button","variant","onClick","Collapse","in","Card","style","width","Header","as","Img","CityBoundary","cityOsm","boundaryFeature","osmtogeojson","features","find","feature","toString","startsWith","GeoJSON","data","fillOpacity","attribution","FeaturePopup","properties","name","entries","filter","key","val","iconColors","App","bounds","elements","latLngBounds","LatLngBounds","minlat","minlon","maxlat","maxlon","Helmet","config","city","Map","maxBounds","minZoom","maxZoom","height","TileLayer","url","ScaleControl","position","LayersControl","window","innerWidth","tiles","tile","Overlay","opacity","featureCollections","i","featureCollection","iconColor","length","icon","Icon","Default","iconUrl","iconRetinaUrl","pointToLayer","pointFeature","latlng","Marker","bindPopup","ReactDOMServer","renderToString","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.763c92f1.chunk.js","sourcesContent":["var map = {\n\t\"./浸水深凡例.png\": [\n\t\t61,\n\t\t4\n\t],\n\t\"./浸水継続時間凡例.png\": [\n\t\t62,\n\t\t5\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 50;\nmodule.exports = webpackAsyncContext;","import { useEffect, useState } from \"react\";\nimport { Button, Card, Collapse } from \"react-bootstrap\";\n\ntype Props = {\n  imageNames: string[];\n  collapsed: boolean;\n};\n\nexport function BottomLeftImages({ imageNames, collapsed }: Props) {\n  const [images, setImages] = useState<{ title: string; src: string }[]>([]);\n  const [open, setOpen] = useState(!collapsed);\n\n  useEffect(() => {\n    (async () => {\n      const importedImages = await Promise.all(\n        imageNames.map(async (imageName) => {\n          const title = imageName.replace(/\\.[^.]+$/, \"\");\n          const image = await import(`../images/${imageName}`);\n          return { title: title, src: image.default };\n        })\n      );\n      setImages(importedImages);\n    })();\n  }, [imageNames]);\n\n  return (\n    <div className=\"leaflet-bottom leaflet-left\">\n      <div className=\"leaflet-control\">\n        <Button\n          variant=\"light\"\n          onClick={() => setOpen(!open)}\n          aria-controls=\"collapse-images\"\n          aria-expanded={open}\n          className=\"mb-1\"\n        >\n          {open ? \"説明を隠す\" : \"説明を表示\"}\n        </Button>\n        <Collapse in={open}>\n          <div id=\"collapse-images\">\n            <div className=\"d-flex align-items-start flex-wrap\">\n              {images.map(({ title, src }) => (\n                <Card\n                  key={title}\n                  className=\"shadow opacity-75 me-1 mb-1\"\n                  style={{ width: \"12rem\" }}\n                >\n                  <Card.Header as=\"h2\" className=\"h6 text-center\">\n                    {title}\n                  </Card.Header>\n                  <Card.Img variant=\"bottom\" src={src} />\n                </Card>\n              ))}\n            </div>\n          </div>\n        </Collapse>\n      </div>\n    </div>\n  );\n}\n","import { FeatureCollection } from \"geojson\";\nimport osmtogeojson from \"osmtogeojson\";\nimport { GeoJSON } from \"react-leaflet\";\n\ntype Props = {\n  cityOsm: any;\n};\n\nexport function CityBoundary({ cityOsm }: Props) {\n  const cityGeoJSON = osmtogeojson(cityOsm) as FeatureCollection;\n  const boundaryFeature = cityGeoJSON.features.find((feature) =>\n    feature.id?.toString()?.startsWith(\"relation/\")\n  );\n\n  if (!boundaryFeature) return null;\n\n  return (\n    <GeoJSON\n      data={boundaryFeature}\n      style={{ fillOpacity: 0 }}\n      attribution='<a href=\"http://osm.org/copyright\">OpenStreetMap</a>'\n    />\n  );\n}\n","import { Feature } from \"geojson\";\n\nexport function FeaturePopup({ feature }: { feature: Feature }) {\n  return (\n    <>\n      <h2 className=\"h6 text-center\">{feature.properties?.name}</h2>\n      <ul className=\"list-unstyled\">\n        {feature.properties &&\n          Object.entries(feature.properties)\n            .filter(([key, _]) => key !== \"name\")\n            .map(([key, val]) => (\n              <li>\n                <b>{key}</b>: {val}\n              </li>\n            ))}\n      </ul>\n    </>\n  );\n}\n","import { Icon, LatLngBounds, Marker } from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport ReactDOMServer from \"react-dom/server\";\nimport { Helmet } from \"react-helmet\";\nimport {\n  GeoJSON,\n  LayersControl,\n  Map,\n  ScaleControl,\n  TileLayer,\n} from \"react-leaflet\";\nimport { BottomLeftImages } from \"./components/BottomLeftImages\";\nimport { CityBoundary } from \"./components/CityBoundary\";\nimport { FeaturePopup } from \"./components/FeaturePopup\";\nimport cityOsm from \"./generated/city-osm.json\";\nimport featureCollections from \"./generated/feature-collections.json\";\nimport config from \"./generated/hazardmap-config.json\";\nimport imageNames from \"./generated/image-names.json\";\n\nconst breakpoint = 768;\n\nconst iconColors = [\n  \"blue\",\n  \"gold\",\n  \"red\",\n  \"green\",\n  \"orange\",\n  \"yellow\",\n  \"violet\",\n  \"gray\",\n  \"black\",\n];\n\nfunction App() {\n  const bounds = cityOsm.elements[0].bounds;\n  const latLngBounds = new LatLngBounds(\n    [bounds.minlat, bounds.minlon],\n    [bounds.maxlat, bounds.maxlon]\n  );\n\n  return (\n    <>\n      <Helmet>\n        <title>{config.city}ハザードマップ</title>\n      </Helmet>\n\n      <Map\n        bounds={latLngBounds}\n        maxBounds={latLngBounds}\n        minZoom={5}\n        maxZoom={17}\n        style={{ height: \"100vh\" }}\n      >\n        <TileLayer\n          url=\"https://cyberjapandata.gsi.go.jp/xyz/pale/{z}/{x}/{y}.png\"\n          attribution='<a href=\"https://maps.gsi.go.jp/development/ichiran.html\">国土地理院</a>'\n        />\n\n        <ScaleControl position=\"bottomright\" />\n\n        <CityBoundary cityOsm={cityOsm} />\n\n        <LayersControl\n          position=\"topright\"\n          collapsed={window.innerWidth <= breakpoint}\n        >\n          {/* Tiles */}\n          {config.tiles.map((tile) => {\n            return (\n              <LayersControl.Overlay key={tile.name} name={tile.name}>\n                <TileLayer\n                  url={tile.url}\n                  opacity={0.75}\n                  attribution={tile.attribution}\n                />\n              </LayersControl.Overlay>\n            );\n          })}\n\n          {/* CSV Point Features */}\n          {Object.entries(featureCollections).map(\n            ([name, featureCollection], i) => {\n              const iconColor = iconColors[i % iconColors.length];\n              const icon = new Icon.Default({\n                iconUrl: `https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-${iconColor}.png`,\n                iconRetinaUrl: `https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-${iconColor}.png`,\n              });\n\n              return (\n                <LayersControl.Overlay key={name} name={name}>\n                  <GeoJSON\n                    // @ts-ignore\n                    data={featureCollection}\n                    pointToLayer={(pointFeature, latlng) => {\n                      return new Marker(latlng, { icon: icon }).bindPopup(\n                        // https://stackoverflow.com/a/60686195\n                        ReactDOMServer.renderToString(\n                          <FeaturePopup feature={pointFeature} />\n                        )\n                      );\n                    }}\n                  />\n                </LayersControl.Overlay>\n              );\n            }\n          )}\n        </LayersControl>\n\n        <BottomLeftImages\n          imageNames={imageNames}\n          collapsed={window.innerWidth <= breakpoint}\n        />\n      </Map>\n    </>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from \"web-vitals\";\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import \"bootstrap/dist/css/bootstrap.min.css\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}